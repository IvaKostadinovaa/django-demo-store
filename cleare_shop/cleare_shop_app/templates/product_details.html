{% extends 'base.html' %}
{% load static %}

{% block content %}
<style>
.review-card {
    transition: transform 0.3s ease;
}

.review-card:hover {
    transform: translateY(-5px);
}

.smaller {
    font-size: 0.8rem;
}

.read-more-btn {
    color: #5d6d4e;
    text-decoration: none;
    font-weight: 500;
    border-bottom: 2px solid #5d6d4e;
    padding-bottom: 5px;
    transition: all 0.3s ease;
}

.read-more-btn:hover {
    color: #4a573e;
    border-color: #4a573e;
    padding-right: 10px;
}
</style>
<div class="d-flex align-items-center justify-content-center mb-4 py-2 w-100">
    <a href="{% url 'products' %}" class="text-dark me-3 d-flex align-items-center justify-content-center" title="Go Back" style="text-decoration: none;">
        <i class="fas fa-chevron-left fa-lg"></i>
    </a>
    <h2 class="cleare-hero-title mb-0" style="font-size: 1.8rem; font-weight: 500; line-height: 1;">Product Details</h2>
</div>

<div class="row product-detail-container">

 <div class="col-md-6">
    <div class="main-image-wrapper position-relative d-flex justify-content-center align-items-center"
         style="background-color: #fdf9ee; min-height: 400px; border-radius: 15px; overflow: hidden;">

        <img src="{{ product.image.url }}"
             class="img-fluid main-product-image"
             alt="{{ product.name }}"
             style="max-height: 100%; object-fit: contain;">


    </div>

    </div>

    <div class="col-md-6 product-info-section">

        <div class="d-flex justify-content-between align-items-center mb-3">
             <span class="badge cleare-tag">{{ product.tag|default:'BESTSELLER' }}</span>
            <span class="badge {{ product.stock|yesno:'bg-success,bg-danger' }} product-stock-tag">{{ product.stock|yesno:'In Stock,Out of Stock' }}</span>
        </div>

        <h2 class="product-detail-title">{{ product.name }}</h2>
        <p class="product-detail-price mb-3">{{ product.price }} ден</p>

        <p class="product-description cleare-text-color pe-md-5">
            {{ product.description|default:'A lightweight, fast-absorbing serum designed to brighten, hydrate, and even the skin tone. Enriched with a potent dose of Vitamin C and botanical extracts.' }}
        </p>

        <div class="d-flex align-items-center mb-4">
            <span class="cleare-text-color me-3">Skin Type:</span>
            <span class="badge product-skin-tag me-2">Dry Skin</span>
            <span class="product-rating me-2">
                <i class="fas fa-star"></i>
                <i class="fas fa-star"></i>
                <i class="fas fa-star"></i>
                <i class="fas fa-star"></i>
                <i class="far fa-star"></i>
            </span>

        </div>

        <form method="post" action="{% url 'add_to_cart' product.id %}" class="mb-4">
            {% csrf_token %}
            <div class="d-flex align-items-center">

                <div class="input-group quantity-input-group me-3" style="width: 130px;">
                    <button class="btn btn-outline-secondary quantity-btn" type="button" data-action="decrement">-</button>
                    <input type="number" name="quantity" id="quantity" class="form-control text-center" value="1" min="1" max="99">
                    <button class="btn btn-outline-secondary quantity-btn" type="button" data-action="increment">+</button>
                </div>

                <button type="submit" class="btn btn-cleare">
                    <i class="fas fa-shopping-cart me-2"></i> Add to Cart
                </button>
            </div>
        </form>

        <hr class="mt-4 mb-4">

        <h5 class="cleare-text-color">Delivery & Returns</h5>
        <ul class="list-unstyled delivery-list text-muted">
            <li><i class="fas fa-truck me-2"></i> Standard Shipping (5-7 Days): Free over 1500 MKD</li>
            <li><i class="fas fa-shipping-fast me-2"></i> Express Shipping (3-5 Days): Paid Option</li>
            <li><i class="fas fa-sync-alt me-2"></i> Unopened Items Can Be Returned Within 14 Days.</li>
        </ul>
    </div>
</div>

<div class="row mt-5 pt-5 border-top product-reviews-section">
    <div class="col-md-5">
        <h4 class="cleare-text-color mb-4">REVIEWS SUMMARY</h4>
        <div class="rating-breakdown">
            <div class="d-flex align-items-center mb-2">
                <span class="me-2">5 Stars</span>
                <div class="progress flex-grow-1 me-2" style="height: 10px;">
                    <div class="progress-bar cleare-bg-progress" role="progressbar" style="width: 80%;" aria-valuenow="80" aria-valuemin="0" aria-valuemax="100"></div>
                </div>
                <span style="width: 40px; text-align: right;">17542</span>
            </div>
             <div class="d-flex align-items-center mb-2">
                <span class="me-2">4 Stars</span>
                <div class="progress flex-grow-1 me-2" style="height: 10px;">
                    <div class="progress-bar cleare-bg-progress" role="progressbar" style="width: 40%;" aria-valuenow="40" aria-valuemin="0" aria-valuemax="100"></div>
                </div>
                <span style="width: 40px; text-align: right;">930</span>
            </div>
             <div class="d-flex align-items-center mb-2">
                <span class="me-2">3 Stars</span>
                <div class="progress flex-grow-1 me-2" style="height: 10px;">
                    <div class="progress-bar cleare-bg-progress" role="progressbar" style="width: 20%;" aria-valuenow="20" aria-valuemin="0" aria-valuemax="100"></div>
                </div>
                <span style="width: 40px; text-align: right;">730</span>
            </div>
             <div class="d-flex align-items-center mb-2">
                <span class="me-2">2 Stars</span>
                <div class="progress flex-grow-1 me-2" style="height: 10px;">
                    <div class="progress-bar cleare-bg-progress" role="progressbar" style="width: 5%;" aria-valuenow="5" aria-valuemin="0" aria-valuemax="100"></div>
                </div>
                <span style="width: 40px; text-align: right;">10</span>
            </div>
             <div class="d-flex align-items-center mb-2">
                <span class="me-2">1 Star</span>
                <div class="progress flex-grow-1 me-2" style="height: 10px;">
                    <div class="progress-bar cleare-bg-progress" role="progressbar" style="width: 1%;" aria-valuenow="1" aria-valuemin="0" aria-valuemax="100"></div>
                </div>
                <span style="width: 40px; text-align: right;">10</span>
            </div>
        </div>
    </div>

    <div class="col-md-7">
        <div class="row ml-2">
            <div class="col-md-6 ml-3">
                 <h5 class="cleare-text-color mb-3">REVIEWERS FIND THIS PRODUCT BEST FOR</h5>
                <ul class="list-unstyled cleare-text-color best-for-list">
                    <li><i class="fas fa-check-circle me-2"></i> Dry skin</li>
                    <li><i class="fas fa-check-circle me-2"></i> Fine lines</li>
                    <li><i class="fas fa-check-circle me-2"></i> Combination skin</li>
                    <li><i class="fas fa-check-circle me-2"></i> Aging skin</li>
                </ul>
            </div>
            <div class="col-md-6 text-center">
                 <h1 class="cleare-text-color review-score">4.6 <span>OUT OF 5</span></h1>
                <div class="product-rating mb-3 fs-4">
                    <i class="fas fa-star"></i>
                    <i class="fas fa-star"></i>
                    <i class="fas fa-star"></i>
                    <i class="fas fa-star"></i>
                    <i class="fas fa-star-half-alt"></i>
                </div>
                <button class="btn btn-outline-dark write-review-btn">WRITE A REVIEW</button>
            </div>
        </div>
    </div>
</div>
<section class="latest-reviews mt-5 py-5" style="background-color: #FDF9EE;">
    <div class="container">
        <h2 class="mb-4" style="font-weight: 600; color: #333;">Latest reviews</h2>

        <div class="row g-4">
            <div class="col-md-4">
                <div class="review-card p-4 h-100 border-0 rounded-4 shadow-sm " style="background: #FDF9EE">
                    <div class="stars mb-2" style="color: #CC857F;">
                        <i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="far fa-star"></i>
                    </div>
                    <h5 class="fw-bold">SEEPS IN!</h5>
                    <p class="text-muted small">Wonderful stuff! It seeps in beautifully and is not sticky or tacky like some serums can be. It works really well and I love using it!</p>
                    <div class="d-flex align-items-center mt-4">
                        <img src="{% static 'review_1.png' %}" class="rounded-circle me-3" alt="Olivia S.">
                        <div>
                            <p class="mb-0 fw-bold small">Olivia S.</p>
                            <span class="text-muted smaller">25 Jun 2025</span>
                        </div>
                    </div>
                </div>
            </div>

            <div class="col-md-4">
                <div class="review-card p-4 h-100 border-0 rounded-4 shadow-sm" style="background: #FDF9EE">
                    <div class="stars mb-2" style="color: #CC857F;">
                        <i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i>
                    </div>
                    <h5 class="fw-bold">Bright and Lightweight!</h5>
                    <p class="text-muted small">I love how lightweight this serum feels. It layers perfectly under my moisturizer and gives my skin a healthy glow without feeling sticky.</p>
                    <div class="d-flex align-items-center mt-4">
                        <img src="{% static 'review_2.png' %}" class="rounded-circle me-3" alt="Mia T.">
                        <div>
                            <p class="mb-0 fw-bold small">Mia T.</p>
                            <span class="text-muted smaller">30 March 2024</span>
                        </div>
                    </div>
                </div>
            </div>

            <div class="col-md-4">
                <div class="review-card p-4 h-100 border-0 rounded-4 shadow-sm "  style="background: #FDF9EE">
                    <div class="stars mb-2" style="color: #CC857F;">
                        <i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i>
                    </div>
                    <h5 class="fw-bold">A must-have!</h5>
                    <p class="text-muted small">This layering concentrate really delivers. My skin texture has improved, and my tone looks more even. Perfect for daily use.</p>
                    <div class="d-flex align-items-center mt-4">
                        <img src="{% static 'review_3.png' %}" class="rounded-circle me-3" alt="Sofia V.">
                        <div>
                            <p class="mb-0 fw-bold small">Sofia V.</p>
                            <span class="text-muted smaller">2 Jan 2025</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="text-center mt-5">
            <a href="#" class="read-more-btn">Read more reviews <i class="fas fa-chevron-right ms-1"></i></a>
        </div>
    </div>
</section>
    <script>
document.addEventListener('DOMContentLoaded', function() {
    const quantityInput = document.getElementById('quantity');
    const buttons = document.querySelectorAll('.quantity-btn');

    buttons.forEach(button => {
        button.addEventListener('click', function() {
            const action = this.getAttribute('data-action');
            let currentValue = parseInt(quantityInput.value);

            if (action === 'increment') {
                if (currentValue < 99) quantityInput.value = currentValue + 1;
            } else if (action === 'decrement') {
                if (currentValue > 1) quantityInput.value = currentValue - 1;
            }
        });
    });
});
</script>

{% endblock %}